# Couple Spot Card - ê¸°ëŠ¥ ëª…ì„¸

## Props ì¸í„°í˜ì´ìŠ¤

```typescript
export interface CoupleSpot {
  id: string;
  title: string;
  category: string;
  location: string;
  district: string;
  atmosphere: string;
  image: string;
  rating: number;
  reviewCount: number;
  description: string;
  priceRange: string;
  tags: string[];
  coupleDiscount?: string;
  recommendedDate?: string;
  weather?: {
    condition: string;
    temperature: string;
    icon: string;
  };
  performanceAvailable?: boolean;
  performanceInfo?: string;
  nearbyAttractions?: string[];
  specialFeatures?: string[];
  address?: string;
  coordinates?: {
    lat: number;
    lng: number;
  };
  nearbyRestaurants?: {
    name: string;
    category: string;
    distance: string;
    rating: number;
  }[];
}

interface CoupleSpotCardProps {
  spot: CoupleSpot;
  onViewDetails: (spot: CoupleSpot) => void;
  onBookmark?: (spotId: string) => void;  // ì¶”í›„ ì¶”ê°€
  isBookmarked?: boolean;  // ì¶”í›„ ì¶”ê°€
}
```

## í˜„ì¬ êµ¬í˜„ ìƒíƒœ âœ…

### 1. ì¹´ë“œ í‘œì‹œ
- ì»¤í”Œ ì¶”ì²œ ì¥ì†Œ ì •ë³´ í‘œì‹œ
- ì´ë¯¸ì§€, ì œëª©, í‰ì , ë¶„ìœ„ê¸° í‘œì‹œ
- ì¶”ì²œ ë‚ ì§œ ë° ë‚ ì”¨ ì •ë³´ í‘œì‹œ (optional)
- ìœ„ì¹˜, ì¹´í…Œê³ ë¦¬, ê°€ê²©ëŒ€ í‘œì‹œ
- íƒœê·¸ í‘œì‹œ

### 2. ì• ë‹ˆë©”ì´ì…˜
- Background gradient í„ìŠ¤
- Couple badge í”Œë¡œíŒ…
- Heart icon í„ìŠ¤
- Hover ì‹œ ì¹´ë“œ ìƒìŠ¹ ë° ì´ë¯¸ì§€ í™•ëŒ€

### 3. ìƒì„¸ë³´ê¸° ì—°ë™
- "ìì„¸íˆ ë³´ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ ìƒì„¸ ë‹¤ì´ì–¼ë¡œê·¸ ì—´ê¸°
- `onViewDetails(spot)` í˜¸ì¶œ

## ê°œì„ ì´ í•„ìš”í•œ ê¸°ëŠ¥ ğŸ”§

### 1. ì°œí•˜ê¸°/ë¶ë§ˆí¬ ê¸°ëŠ¥ â­
**í˜„ì¬:** ë¯¸êµ¬í˜„  
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
interface CoupleSpotCardProps {
  // ...
  isBookmarked?: boolean;
  onBookmark?: (spotId: string) => void;
  isLoggedIn?: boolean;
}

// ì°œí•˜ê¸° ë²„íŠ¼ ì¶”ê°€ (ì´ë¯¸ì§€ ìœ„ ìš°ì¸¡ ìƒë‹¨)
<Button
  variant="ghost"
  size="icon"
  className={`absolute top-2 right-2 size-8 rounded-full backdrop-blur-sm ${
    isBookmarked
      ? 'bg-red-500/90 hover:bg-red-600/90 text-white'
      : 'bg-white/90 hover:bg-white text-gray-700 hover:text-red-500'
  }`}
  onClick={(e) => {
    e.stopPropagation();
    onBookmark?.(spot.id);
  }}
>
  <Heart className={isBookmarked ? 'fill-current' : ''} />
</Button>
```

### 2. ê³µìœ  ê¸°ëŠ¥ â­
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
const handleShare = async () => {
  const shareData = {
    title: spot.title,
    text: `${spot.title} - ì»¤í”Œ ì¶”ì²œ ë°ì´íŠ¸ ì¥ì†Œ`,
    url: `${window.location.origin}/couple-spot/${spot.id}`,
  };

  if (navigator.share && navigator.canShare(shareData)) {
    await navigator.share(shareData);
  } else {
    await navigator.clipboard.writeText(shareData.url);
    toast.success('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
  }
};
```

### 3. ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬
**í•„ìš”í•œ ê¸°ëŠ¥:**
- ì—¬ëŸ¬ ì´ë¯¸ì§€ ì§€ì›
- Carousel í˜•íƒœë¡œ ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë”
```typescript
interface CoupleSpot {
  // ...
  images?: string[];  // ì—¬ëŸ¬ ì´ë¯¸ì§€ ì§€ì›
  image: string;      // ëŒ€í‘œ ì´ë¯¸ì§€
}
```

### 4. ë‚ ì”¨ API ì—°ë™
**í•„ìš”í•œ ê¸°ëŠ¥:**
- ì¶”ì²œ ë‚ ì§œì˜ ì‹¤ì œ ë‚ ì”¨ ì •ë³´ í‘œì‹œ
- ë‚ ì”¨ API ì—°ë™ (OpenWeatherMap ë“±)
```typescript
async function getWeatherInfo(date: string, lat: number, lng: number) {
  // ë‚ ì”¨ API í˜¸ì¶œ
  const response = await fetch(
    `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lng}&appid=${WEATHER_API_KEY}&units=metric&lang=kr`
  );
  const data = await response.json();
  return {
    condition: data.weather[0].description,
    temperature: `${Math.round(data.main.temp)}Â°C`,
    icon: getWeatherIcon(data.weather[0].main),
  };
}
```

## API ì—°ë™ ê³„íš

### Supabase í…Œì´ë¸” ì„¤ê³„
```sql
CREATE TABLE couple_spots (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  title TEXT NOT NULL,
  category TEXT,
  location TEXT NOT NULL,
  district TEXT,
  atmosphere TEXT,
  image TEXT,
  images TEXT[],  -- ì—¬ëŸ¬ ì´ë¯¸ì§€ ì§€ì›
  rating NUMERIC(3, 2),
  review_count INTEGER DEFAULT 0,
  description TEXT,
  price_range TEXT,
  tags TEXT[],
  couple_discount TEXT,
  recommended_date DATE,
  performance_available BOOLEAN DEFAULT false,
  performance_info TEXT,
  nearby_attractions TEXT[],
  special_features TEXT[],
  address TEXT,
  lat NUMERIC(10, 8),
  lng NUMERIC(11, 8),
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE couple_spot_bookmarks (
  user_id UUID REFERENCES users(id),
  spot_id UUID REFERENCES couple_spots(id),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  PRIMARY KEY (user_id, spot_id)
);

CREATE TABLE couple_spot_nearby_restaurants (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  spot_id UUID REFERENCES couple_spots(id),
  name TEXT NOT NULL,
  category TEXT,
  distance TEXT,
  rating NUMERIC(3, 2),
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

### API ì—”ë“œí¬ì¸íŠ¸
- `GET /couple-spots` - ì»¤í”Œ ìŠ¤íŒŸ ëª©ë¡
- `GET /couple-spots/:id` - ì»¤í”Œ ìŠ¤íŒŸ ìƒì„¸
- `POST /couple-spots/:id/bookmark` - ì°œí•˜ê¸° í† ê¸€
- `GET /couple-spots/recommended` - ì¶”ì²œ ì»¤í”Œ ìŠ¤íŒŸ
- `GET /couple-spots/nearby` - ì£¼ë³€ ì»¤í”Œ ìŠ¤íŒŸ

## í…ŒìŠ¤íŠ¸ ê³„íš

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- Props ì „ë‹¬ í…ŒìŠ¤íŠ¸
- ì¡°ê±´ë¶€ ë Œë”ë§ í…ŒìŠ¤íŠ¸ (discount, recommendedDate, weather)
- ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ ì‹œ Fallback í…ŒìŠ¤íŠ¸

### í†µí•© í…ŒìŠ¤íŠ¸
- ì°œí•˜ê¸° ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- ê³µìœ  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- ìƒì„¸ë³´ê¸° ì—°ë™ í…ŒìŠ¤íŠ¸

### E2E í…ŒìŠ¤íŠ¸
- ì¹´ë“œ í´ë¦­ â†’ ìƒì„¸ë³´ê¸° í”Œë¡œìš°
- ì°œí•˜ê¸° ë²„íŠ¼ í´ë¦­ â†’ ë¶ë§ˆí¬ ì¶”ê°€ í”Œë¡œìš°

## ì ‘ê·¼ì„± (a11y)

### ARIA ë ˆì´ë¸”
```tsx
<Card
  role="article"
  aria-label={`${spot.title} - ì»¤í”Œ ì¶”ì²œ ë°ì´íŠ¸ ì¥ì†Œ`}
>
  {/* ... */}
</Card>

<Button
  aria-label={`${spot.title} ìƒì„¸ë³´ê¸°`}
  onClick={() => onViewDetails(spot)}
>
  {/* ... */}
</Button>
```

### í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
- Tab í‚¤ë¡œ ë²„íŠ¼ì— ì ‘ê·¼ ê°€ëŠ¥
- Enter/Spaceë¡œ ë²„íŠ¼ í™œì„±í™”

## ì„±ëŠ¥ ìµœì í™”

### ì´ë¯¸ì§€ ìµœì í™”
- WebP í¬ë§· ì§€ì›
- Lazy loading (Intersection Observer)
- Responsive images (srcset)

### ë©”ëª¨ì´ì œì´ì…˜
```typescript
export const CoupleSpotCard = React.memo(
  CoupleSpotCardComponent,
  (prevProps, nextProps) => {
    return prevProps.spot.id === nextProps.spot.id &&
           prevProps.isBookmarked === nextProps.isBookmarked;
  }
);
```
