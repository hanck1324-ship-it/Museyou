# Couple Spot Detail - ê¸°ëŠ¥ ëª…ì„¸

## Props ì¸í„°í˜ì´ìŠ¤

```typescript
interface CoupleSpotDetailProps {
  spot: CoupleSpot | null;
  open: boolean;
  onOpenChange: (open: boolean) => void;
  onBookmark?: (spotId: string) => void;  // ì¶”í›„ ì¶”ê°€
  isBookmarked?: boolean;  // ì¶”í›„ ì¶”ê°€
  onShare?: (spot: CoupleSpot) => void;  // ì¶”í›„ ì¶”ê°€
}
```

## í˜„ì¬ êµ¬í˜„ ìƒíƒœ âœ…

### 1. Dialog í‘œì‹œ
- Dialog ì»´í¬ë„ŒíŠ¸ë¡œ ìƒì„¸ ì •ë³´ í‘œì‹œ
- ì»¤í”Œ ìŠ¤íŒŸ ì´ë¯¸ì§€, ì •ë³´, ë¦¬ë·° í‘œì‹œ

### 2. Tab êµ¬ì¡°
- ìƒì„¸ì •ë³´ íƒ­: ì†Œê°œ, ë‚ ì§œ/ë‚ ì”¨, ë¶„ìœ„ê¸°/ê°€ê²©ëŒ€, ê³µì—° ì—¬ë¶€, ìœ„ì¹˜, ê·¼ì²˜ ëª…ì†Œ, íŠ¹ë³„ í˜œíƒ, íƒœê·¸
- ë°ì´íŠ¸ ì½”ìŠ¤ íƒ­: ì¶”ì²œ ì½”ìŠ¤ 1-3ë‹¨ê³„
- ì£¼ë³€ ë§›ì§‘ íƒ­: ë§›ì§‘ ë¦¬ìŠ¤íŠ¸ ë˜ëŠ” Empty State
- íŒ & í›„ê¸° íƒ­: ë°ì´íŠ¸ íŒ, ì»¤í”Œ í•œì¤„í‰

### 3. ì§€ë„ ì—°ë™
- ì¹´ì¹´ì˜¤ë§µ ë²„íŠ¼: Kakao Map ë§í¬ ì—´ê¸°
- ë„¤ì´ë²„ë§µ ë²„íŠ¼: Naver Map ë§í¬ ì—´ê¸°
- ìƒˆ ì°½ìœ¼ë¡œ ì—´ê¸°

### 4. ì°œí•˜ê¸° ë²„íŠ¼
- í´ë¦­ ì‹œ alert í‘œì‹œ (ì‹¤ì œ ì €ì¥ X)

## ê°œì„ ì´ í•„ìš”í•œ ê¸°ëŠ¥ ğŸ”§

### 1. ì°œí•˜ê¸° ê¸°ëŠ¥ ì—°ë™ â­
**í˜„ì¬:** alert í‘œì‹œë§Œ  
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
interface CoupleSpotDetailProps {
  // ...
  isBookmarked?: boolean;
  onBookmark?: (spotId: string) => void;
  isLoggedIn?: boolean;
}

const handleBookmark = async () => {
  if (!isLoggedIn) {
    toast.error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
    return;
  }

  try {
    await coupleSpotApi.toggleBookmark(spot.id);
    toast.success(isBookmarked ? 'ì°œí•˜ê¸°ê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ì°œ ëª©ë¡ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! â¤ï¸');
    onBookmark?.(spot.id);
  } catch (error) {
    handleError(error);
  }
};
```

### 2. ê³µìœ  ê¸°ëŠ¥ â­
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
const handleShare = async () => {
  const shareData = {
    title: spot.title,
    text: `${spot.title} - ì»¤í”Œ ì¶”ì²œ ë°ì´íŠ¸ ì¥ì†Œ`,
    url: `${window.location.origin}/couple-spot/${spot.id}`,
  };

  if (navigator.share && navigator.canShare(shareData)) {
    await navigator.share(shareData);
    toast.success('ê³µìœ ë˜ì—ˆìŠµë‹ˆë‹¤!');
  } else {
    await navigator.clipboard.writeText(shareData.url);
    toast.success('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
  }
};

// ê³µìœ  ë²„íŠ¼ ì¶”ê°€ (Dialog Header)
<Button
  variant="ghost"
  size="icon"
  onClick={handleShare}
>
  <Share2 className="size-4" />
</Button>
```

### 3. ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ â­
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
interface CoupleSpot {
  // ...
  images?: string[];  // ì—¬ëŸ¬ ì´ë¯¸ì§€ ì§€ì›
  image: string;      // ëŒ€í‘œ ì´ë¯¸ì§€
}

// Carouselë¡œ ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë” ì¶”ê°€
<Carousel className="h-64">
  {spot.images?.map((img, idx) => (
    <CarouselItem key={idx}>
      <ImageWithFallback src={img} alt={`${spot.title} ${idx + 1}`} />
    </CarouselItem>
  )) || (
    <CarouselItem>
      <ImageWithFallback src={spot.image} alt={spot.title} />
    </CarouselItem>
  )}
</Carousel>
```

### 4. ì§€ë„ í†µí•© â­
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
// PerformanceMapê³¼ ìœ ì‚¬í•œ ì§€ë„ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©
<PerformanceMap
  venue={{
    name: spot.title,
    address: spot.address || spot.location,
    lat: spot.coordinates?.lat || 0,
    lng: spot.coordinates?.lng || 0,
  }}
/>
```

### 5. ë¦¬ë·° ì‹œìŠ¤í…œ ê°•í™”
**í•„ìš”í•œ ê¸°ëŠ¥:**
- ë¦¬ë·° ì‘ì„±/ìˆ˜ì •/ì‚­ì œ
- ë¦¬ë·° ì´ë¯¸ì§€ ì—…ë¡œë“œ
- ë¦¬ë·° ì¢‹ì•„ìš”
- ë¦¬ë·° ì •ë ¬/í•„í„°ë§

### 6. ë°ì´íŠ¸ ì½”ìŠ¤ ì»¤ìŠ¤í„°ë§ˆì´ì§•
**í•„ìš”í•œ ê¸°ëŠ¥:**
- ì‚¬ìš©ìë³„ ë§ì¶¤ ì½”ìŠ¤ ì œì•ˆ
- ì½”ìŠ¤ ì €ì¥ ë° ê³µìœ 

### 7. ë‚ ì”¨ API ì—°ë™
**í•„ìš”í•œ ê¸°ëŠ¥:**
- ì¶”ì²œ ë‚ ì§œì˜ ì‹¤ì œ ë‚ ì”¨ ì •ë³´ í‘œì‹œ
- ë‚ ì”¨ ê¸°ë°˜ ì¶”ì²œ

## API ì—°ë™ ê³„íš

### Supabase í…Œì´ë¸” ì„¤ê³„ (ì°¸ê³ )
```sql
-- couple_spots í…Œì´ë¸”ì€ CoupleSpotCardì™€ ë™ì¼

CREATE TABLE couple_spot_reviews (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  spot_id UUID REFERENCES couple_spots(id),
  user_id UUID REFERENCES users(id),
  rating INTEGER NOT NULL CHECK (rating >= 1 AND rating <= 5),
  content TEXT NOT NULL,
  images TEXT[],
  helpful_count INTEGER DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE couple_spot_date_courses (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  spot_id UUID REFERENCES couple_spots(id),
  step_number INTEGER NOT NULL,
  time TEXT NOT NULL,
  activity TEXT NOT NULL,
  description TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

### API ì—”ë“œí¬ì¸íŠ¸
- `GET /couple-spots/:id` - ìŠ¤íŒŸ ìƒì„¸ ì •ë³´
- `POST /couple-spots/:id/bookmark` - ì°œí•˜ê¸° í† ê¸€
- `GET /couple-spots/:id/reviews` - ë¦¬ë·° ëª©ë¡
- `POST /couple-spots/:id/reviews` - ë¦¬ë·° ì‘ì„±
- `GET /couple-spots/:id/date-courses` - ë°ì´íŠ¸ ì½”ìŠ¤ ëª©ë¡
- `POST /couple-spots/:id/share` - ê³µìœ  ì¹´ìš´íŠ¸ ì¦ê°€

## í…ŒìŠ¤íŠ¸ ê³„íš

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- Props ì „ë‹¬ í…ŒìŠ¤íŠ¸
- Tab ì „í™˜ í…ŒìŠ¤íŠ¸
- ì¡°ê±´ë¶€ ë Œë”ë§ í…ŒìŠ¤íŠ¸

### í†µí•© í…ŒìŠ¤íŠ¸
- ì°œí•˜ê¸° ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- ê³µìœ  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- ì§€ë„ ë²„íŠ¼ í´ë¦­ í…ŒìŠ¤íŠ¸

### E2E í…ŒìŠ¤íŠ¸
- ìƒì„¸ë³´ê¸° â†’ ì°œí•˜ê¸° í”Œë¡œìš°
- ìƒì„¸ë³´ê¸° â†’ ê³µìœ  í”Œë¡œìš°
- ìƒì„¸ë³´ê¸° â†’ ì§€ë„ ì—´ê¸° í”Œë¡œìš°

## ì ‘ê·¼ì„± (a11y)

### ARIA ë ˆì´ë¸”
```tsx
<Dialog
  aria-labelledby="couple-spot-detail-title"
  aria-describedby="couple-spot-detail-description"
>
  <DialogTitle id="couple-spot-detail-title">
    {spot.title}
  </DialogTitle>
  <DialogDescription id="couple-spot-detail-description">
    {spot.district} Â· {spot.category} Â· {spot.atmosphere}
  </DialogDescription>
</Dialog>

<Button
  aria-label="ì¹´ì¹´ì˜¤ë§µì—ì„œ ê¸¸ì°¾ê¸°"
  onClick={handleNavigate}
>
  {/* ... */}
</Button>
```

### í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
- Tabìœ¼ë¡œ Tab ì „í™˜
- Enter/Spaceë¡œ ë²„íŠ¼ í™œì„±í™”
- Escapeë¡œ Dialog ë‹«ê¸°

## ì„±ëŠ¥ ìµœì í™”

### ë©”ëª¨ì´ì œì´ì…˜
```typescript
export const CoupleSpotDetail = React.memo(
  CoupleSpotDetailComponent,
  (prevProps, nextProps) => {
    return (
      prevProps.spot?.id === nextProps.spot?.id &&
      prevProps.open === nextProps.open
    );
  }
);
```

### ì´ë¯¸ì§€ ìµœì í™”
- ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ Lazy loading
- WebP í¬ë§· ì§€ì›
- Responsive images

## ë‹¤í¬ëª¨ë“œ ì§€ì›

### í˜„ì¬ ìƒíƒœ
- ê¸°ë³¸ ë‹¤í¬ëª¨ë“œ í´ë˜ìŠ¤ ì ìš©ë¨
- Box ë°°ê²½, í…Œë‘ë¦¬ ë‹¤í¬ëª¨ë“œ ì§€ì›
