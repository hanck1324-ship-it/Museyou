# Event Card - ê¸°ëŠ¥ ëª…ì„¸

## Props ì¸í„°í˜ì´ìŠ¤

```typescript
interface EventCardProps {
  image: string;
  title: string;
  date: string;
  location: string;
  traffic: "high" | "mid" | "low";
  className?: string;
  onClick?: () => void;
  onViewDetails?: () => void;  // ì¶”í›„ ì¶”ê°€
}
```

## í˜„ì¬ êµ¬í˜„ ìƒíƒœ âœ…

### 1. ì´ë²¤íŠ¸ ì •ë³´ í‘œì‹œ
- ì´ë¯¸ì§€ í‘œì‹œ (ImageWithFallback ì‚¬ìš©)
- ì œëª©, ë‚ ì§œ, ìœ„ì¹˜ í‘œì‹œ
- êµí†µ ì •ë³´ í‘œì‹œ (ìƒ‰ìƒ ì½”ë”©)

### 2. ì¸í„°ë™ì…˜
- Hover ì‹œ ì´ë¯¸ì§€ í™•ëŒ€ ë° ì˜¤ë²„ë ˆì´
- í´ë¦­ ì‹œ `onClick` ì½œë°± í˜¸ì¶œ

### 3. êµí†µ ì •ë³´
- Traffic levelì— ë”°ë¥¸ ìƒ‰ìƒ ë° ë¼ë²¨ í‘œì‹œ
- ì‹œê°ì  ì¸ë””ì¼€ì´í„° (ì›í˜• ì )

## ê°œì„ ì´ í•„ìš”í•œ ê¸°ëŠ¥ ğŸ”§

### 1. ìƒì„¸ë³´ê¸° ê¸°ëŠ¥ â­
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
interface EventCardProps {
  // ...
  eventId?: string;
  onViewDetails?: (eventId: string) => void;
}

// í´ë¦­ í•¸ë“¤ëŸ¬
const handleClick = () => {
  if (onViewDetails && eventId) {
    onViewDetails(eventId);
  } else {
    onClick?.();
  }
};
```

### 2. ì¢‹ì•„ìš”/ë¶ë§ˆí¬ ê¸°ëŠ¥
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
interface EventCardProps {
  // ...
  isBookmarked?: boolean;
  onToggleBookmark?: (eventId: string) => void;
  isLoggedIn?: boolean;
}

// ì¢‹ì•„ìš” ë²„íŠ¼ ì¶”ê°€ (ì´ë¯¸ì§€ ìœ„ ìš°ì¸¡ ìƒë‹¨)
<Button
  variant="ghost"
  size="icon"
  className="absolute top-2 right-2 size-8 rounded-full backdrop-blur-sm"
  onClick={(e) => {
    e.stopPropagation();
    onToggleBookmark?.(event.id);
  }}
>
  <Heart className={isBookmarked ? 'fill-current' : ''} />
</Button>
```

### 3. ê³µìœ  ê¸°ëŠ¥
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
const handleShare = async () => {
  const shareData = {
    title: title,
    text: `${title} - ${location}`,
    url: `${window.location.origin}/event/${eventId}`,
  };

  if (navigator.share && navigator.canShare(shareData)) {
    await navigator.share(shareData);
  } else {
    await navigator.clipboard.writeText(shareData.url);
    toast.success('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
  }
};
```

### 4. ì‹¤ì‹œê°„ êµí†µ ì •ë³´
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
// APIì—ì„œ ì‹¤ì‹œê°„ êµí†µ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
useEffect(() => {
  const fetchTrafficInfo = async () => {
    try {
      const data = await api.getTrafficInfo(location);
      setTraffic(data.level); // 'high' | 'mid' | 'low'
    } catch (error) {
      // ì—ëŸ¬ ì²˜ë¦¬
    }
  };

  fetchTrafficInfo();
  // ì£¼ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ (5ë¶„ë§ˆë‹¤)
  const interval = setInterval(fetchTrafficInfo, 5 * 60 * 1000);
  return () => clearInterval(interval);
}, [location]);
```

### 5. ì¹´í…Œê³ ë¦¬/íƒœê·¸ í‘œì‹œ
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
interface EventCardProps {
  // ...
  category?: string;
  tags?: string[];
}

// ì¹´í…Œê³ ë¦¬ Badge ì¶”ê°€ (ì´ë¯¸ì§€ ìœ„)
<Badge className="absolute top-2 left-2">
  {category}
</Badge>

// íƒœê·¸ í‘œì‹œ (Content Section)
{tags && tags.length > 0 && (
  <div className="flex gap-1 flex-wrap">
    {tags.map((tag, idx) => (
      <Badge key={idx} variant="secondary" className="text-xs">
        {tag}
      </Badge>
    ))}
  </div>
)}
```

## API ì—°ë™ ê³„íš

### Supabase í…Œì´ë¸” ì„¤ê³„
```sql
CREATE TABLE events (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  title TEXT NOT NULL,
  image TEXT,
  date TEXT NOT NULL,
  location TEXT NOT NULL,
  traffic_level TEXT DEFAULT 'mid', -- 'high' | 'mid' | 'low'
  category TEXT,
  tags TEXT[],
  description TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE event_traffic_logs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  event_id UUID REFERENCES events(id),
  location TEXT NOT NULL,
  traffic_level TEXT NOT NULL,
  recorded_at TIMESTAMPTZ DEFAULT NOW()
);
```

### API ì—”ë“œí¬ì¸íŠ¸
- `GET /events` - ì´ë²¤íŠ¸ ëª©ë¡
- `GET /events/:id` - ì´ë²¤íŠ¸ ìƒì„¸
- `GET /events/:id/traffic` - ì‹¤ì‹œê°„ êµí†µ ì •ë³´
- `POST /events/:id/bookmark` - ì°œí•˜ê¸° í† ê¸€

## í…ŒìŠ¤íŠ¸ ê³„íš

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- Props ì „ë‹¬ í…ŒìŠ¤íŠ¸
- Traffic level ìƒ‰ìƒ í…ŒìŠ¤íŠ¸
- í´ë¦­ í•¸ë“¤ëŸ¬ í…ŒìŠ¤íŠ¸

### í†µí•© í…ŒìŠ¤íŠ¸
- ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ ì‹œ Fallback í…ŒìŠ¤íŠ¸
- Hover ì¸í„°ë™ì…˜ í…ŒìŠ¤íŠ¸

### E2E í…ŒìŠ¤íŠ¸
- ì¹´ë“œ í´ë¦­ â†’ ìƒì„¸ë³´ê¸° í”Œë¡œìš°
- ì°œí•˜ê¸° ê¸°ëŠ¥ í”Œë¡œìš°

## ì ‘ê·¼ì„± (a11y)

### ARIA ë ˆì´ë¸”
```tsx
<div
  role="article"
  aria-label={`${title} - ${date} - ${location}`}
  onClick={handleClick}
  tabIndex={0}
  onKeyDown={(e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      handleClick();
    }
  }}
>
  {/* ... */}
</div>
```

### í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
- Tabìœ¼ë¡œ ì¹´ë“œ ì ‘ê·¼ ê°€ëŠ¥
- Enter/Spaceë¡œ í´ë¦­ í™œì„±í™”

## ì„±ëŠ¥ ìµœì í™”

### ë©”ëª¨ì´ì œì´ì…˜
```typescript
export const EventCard = React.memo(
  EventCardComponent,
  (prevProps, nextProps) => {
    return prevProps.eventId === nextProps.eventId &&
           prevProps.traffic === nextProps.traffic;
  }
);
```

### ì´ë¯¸ì§€ ìµœì í™”
- ImageWithFallback ì‚¬ìš©
- Lazy loading
- WebP í¬ë§· ì§€ì›
