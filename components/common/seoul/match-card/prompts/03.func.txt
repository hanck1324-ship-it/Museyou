# Match Card (Seoul) - ê¸°ëŠ¥ ëª…ì„¸

## Props ì¸í„°í˜ì´ìŠ¤

```typescript
interface MatchCardProps {
  avatar: string;
  name: string;
  age: string;
  tags: string[];
  onRequest?: () => void;
  className?: string;
  userId?: string;  // ì¶”í›„ ì¶”ê°€
  isRequested?: boolean;  // ì¶”í›„ ì¶”ê°€
  onViewProfile?: () => void;  // ì¶”í›„ ì¶”ê°€
}
```

## í˜„ì¬ êµ¬í˜„ ìƒíƒœ âœ…

### 1. ë§¤ì¹­ ì •ë³´ í‘œì‹œ
- Avatar í‘œì‹œ (Avatar ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©)
- ì´ë¦„, ë‚˜ì´ í‘œì‹œ
- íƒœê·¸ í‘œì‹œ (ê³µë°±ìœ¼ë¡œ êµ¬ë¶„)

### 2. ìš”ì²­ ë²„íŠ¼
- PrimaryButton ì‚¬ìš©
- í´ë¦­ ì‹œ `onRequest` ì½œë°± í˜¸ì¶œ

### 3. ì¸í„°ë™ì…˜
- Hover ì‹œ shadow ì¦ê°€

## ê°œì„ ì´ í•„ìš”í•œ ê¸°ëŠ¥ ğŸ”§

### 1. í”„ë¡œí•„ ë³´ê¸° ê¸°ëŠ¥ â­
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
interface MatchCardProps {
  // ...
  onViewProfile?: () => void;
}

// ì¹´ë“œ í´ë¦­ ì‹œ í”„ë¡œí•„ ë³´ê¸°
<div
  className="flex items-center gap-4 p-4 cursor-pointer"
  onClick={onViewProfile}
>
  {/* ... */}
</div>
```

### 2. ìš”ì²­ ìƒíƒœ ê´€ë¦¬ â­
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
interface MatchCardProps {
  // ...
  isRequested?: boolean;
  isPending?: boolean;
  onCancelRequest?: () => void;
}

// ë²„íŠ¼ ìƒíƒœì— ë”°ë¥¸ í…ìŠ¤íŠ¸ ë³€ê²½
<PrimaryButton
  onClick={isRequested ? onCancelRequest : onRequest}
  disabled={isPending}
>
  {isPending ? 'ìš”ì²­ ì¤‘...' : isRequested ? 'ìš”ì²­ë¨' : 'ìš”ì²­'}
</PrimaryButton>
```

### 3. ë§¤ì¹­ ìŠ¤ì½”ì–´ í‘œì‹œ
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
interface MatchCardProps {
  // ...
  matchScore?: number;
}

// ë§¤ì¹­ ìŠ¤ì½”ì–´ Badge ì¶”ê°€
{matchScore && (
  <Badge className="absolute top-2 right-2 bg-gradient-to-r from-pink-500 to-purple-500">
    {matchScore}% ë§¤ì¹­
  </Badge>
)}
```

### 4. ìƒíƒœ ì•„ì´ì½˜
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
import { CheckCircle, Clock } from 'lucide-react';

// ìš”ì²­ ìƒíƒœ ì•„ì´ì½˜
{isRequested && (
  <CheckCircle className="size-4 text-green-500" />
)}
{isPending && (
  <Clock className="size-4 text-yellow-500 animate-spin" />
)}
```

### 5. ë” ë§ì€ ì •ë³´ í‘œì‹œ
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
interface MatchCardProps {
  // ...
  bio?: string;  // ì§§ì€ ì†Œê°œ
  interests?: string[];  // ê´€ì‹¬ì‚¬ (íƒœê·¸ì™€ ë³„ë„)
  location?: string;  // ìœ„ì¹˜
}

// Bio í‘œì‹œ (line-clamp-2)
{bio && (
  <p className="text-xs text-muted-foreground line-clamp-2">
    {bio}
  </p>
)}

// ìœ„ì¹˜ í‘œì‹œ
{location && (
  <div className="flex items-center gap-1 text-xs text-muted-foreground">
    <MapPin className="size-3" />
    <span>{location}</span>
  </div>
)}
```

## API ì—°ë™ ê³„íš

### Supabase í…Œì´ë¸” ì„¤ê³„
```sql
CREATE TABLE match_requests (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  from_user_id UUID REFERENCES users(id),
  to_user_id UUID REFERENCES users(id),
  status TEXT DEFAULT 'pending', -- 'pending' | 'accepted' | 'declined'
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  PRIMARY KEY (from_user_id, to_user_id)
);

CREATE TABLE user_match_scores (
  user_id UUID REFERENCES users(id),
  target_user_id UUID REFERENCES users(id),
  score NUMERIC(5, 2), -- 0-100
  factors JSONB, -- ë§¤ì¹­ ì ìˆ˜ ê³„ì‚° ìš”ì¸
  calculated_at TIMESTAMPTZ DEFAULT NOW(),
  PRIMARY KEY (user_id, target_user_id)
);
```

### API ì—”ë“œí¬ì¸íŠ¸
- `POST /matches/request` - ë§¤ì¹­ ìš”ì²­
- `GET /matches/requests` - ë‚´ ìš”ì²­ ëª©ë¡
- `PUT /matches/requests/:id/cancel` - ìš”ì²­ ì·¨ì†Œ
- `GET /matches/scores/:userId` - ë§¤ì¹­ ìŠ¤ì½”ì–´

## í…ŒìŠ¤íŠ¸ ê³„íš

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- Props ì „ë‹¬ í…ŒìŠ¤íŠ¸
- Avatar í‘œì‹œ í…ŒìŠ¤íŠ¸
- ë²„íŠ¼ ìƒíƒœ í…ŒìŠ¤íŠ¸

### í†µí•© í…ŒìŠ¤íŠ¸
- ìš”ì²­ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- í”„ë¡œí•„ ë³´ê¸° í…ŒìŠ¤íŠ¸

### E2E í…ŒìŠ¤íŠ¸
- ë§¤ì¹­ ìš”ì²­ ì „ì²´ í”Œë¡œìš°
- ìš”ì²­ ì·¨ì†Œ í”Œë¡œìš°

## ì ‘ê·¼ì„± (a11y)

### ARIA ë ˆì´ë¸”
```tsx
<div
  role="article"
  aria-label={`${name}, ${age} - ${tags.join(', ')}`}
  onClick={onViewProfile}
  tabIndex={0}
  onKeyDown={(e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      onViewProfile?.();
    }
  }}
>
  {/* ... */}
</div>

<button
  aria-label={`${name}ì—ê²Œ ë§¤ì¹­ ìš”ì²­í•˜ê¸°`}
  onClick={onRequest}
>
  ìš”ì²­
</button>
```

### í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
- Tabìœ¼ë¡œ ì¹´ë“œ ë° ë²„íŠ¼ ì ‘ê·¼
- Enter/Spaceë¡œ í™œì„±í™”

## ì„±ëŠ¥ ìµœì í™”

### ë©”ëª¨ì´ì œì´ì…˜
```typescript
export const SeoulMatchCard = React.memo(
  SeoulMatchCardComponent,
  (prevProps, nextProps) => {
    return prevProps.userId === nextProps.userId &&
           prevProps.isRequested === nextProps.isRequested;
  }
);
```
