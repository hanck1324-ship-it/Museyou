# Promotion Card - ê¸°ëŠ¥ ëª…ì„¸

## Props ì¸í„°í˜ì´ìŠ¤

```typescript
export interface Promotion {
  id: string;
  title: string;
  district: string;
  category: string;
  date: string;
  image: string;
  description: string;
  organizer: string;
  link?: string;  // ì„ íƒì‚¬í•­: ì™¸ë¶€ ë§í¬
}

interface PromotionCardProps {
  promotion: Promotion;
  onViewDetails?: (promotion: Promotion) => void;  // ì¶”í›„ ì¶”ê°€ ê°€ëŠ¥
}
```

## í˜„ì¬ êµ¬í˜„ ìƒíƒœ âœ…

### 1. ì¹´ë“œ í‘œì‹œ
- í”„ë¡œëª¨ì…˜ ì œëª©, ì¹´í…Œê³ ë¦¬, ì§€ì—­ í‘œì‹œ
- ì´ë¯¸ì§€ í‘œì‹œ (ImageWithFallback ì‚¬ìš©)
- ì„¤ëª…, ì£¼ìµœ, ë‚ ì§œ ì •ë³´ í‘œì‹œ

### 2. ì™¸ë¶€ ë§í¬
- `promotion.link`ê°€ ìˆì„ ë•Œë§Œ ë²„íŠ¼ í‘œì‹œ
- ìƒˆ ì°½ìœ¼ë¡œ ì—´ê¸° (`target="_blank"`)
- `rel="noopener noreferrer"` ë³´ì•ˆ ì†ì„± í¬í•¨

### 3. ì´ë¯¸ì§€ ì²˜ë¦¬
- ImageWithFallback ì»´í¬ë„ŒíŠ¸ë¡œ ë¡œë“œ ì‹¤íŒ¨ ì²˜ë¦¬
- Hover ì‹œ í™•ëŒ€ ì• ë‹ˆë©”ì´ì…˜

## ê°œì„ ì´ í•„ìš”í•œ ê¸°ëŠ¥ ğŸ”§

### 1. ìƒì„¸ë³´ê¸° ê¸°ëŠ¥ â­
**í˜„ì¬:** ë¯¸êµ¬í˜„  
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
interface PromotionCardProps {
  promotion: Promotion;
  onViewDetails?: (promotion: Promotion) => void;
}

// ì‚¬ìš© ì˜ˆì‹œ
<PromotionCard
  promotion={promotion}
  onViewDetails={(promo) => {
    // Dialog ë˜ëŠ” ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™
    setSelectedPromotion(promo);
    setDetailOpen(true);
  }}
/>
```

**Supabase ì—°ë™:**
```typescript
// lib/api/promotions.ts
export async function getPromotionById(id: string) {
  if (USE_MOCK_MODE) {
    const promotion = mockPromotions.find(p => p.id === id);
    return { promotion };
  }
  return await apiCall(`/promotions/${id}`);
}
```

### 2. ì¢‹ì•„ìš”/ë¶ë§ˆí¬ ê¸°ëŠ¥ â­
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
interface PromotionCardProps {
  promotion: Promotion;
  isBookmarked?: boolean;
  onToggleBookmark?: (promotionId: string) => void;
  isLoggedIn?: boolean;
}

// ì¢‹ì•„ìš”/ë¶ë§ˆí¬ ë²„íŠ¼ ì¶”ê°€ (ì´ë¯¸ì§€ ìœ„ ìš°ì¸¡ ìƒë‹¨)
<Button
  variant="ghost"
  size="icon"
  className="absolute top-2 right-2 size-8 rounded-full backdrop-blur-sm"
  onClick={handleToggleBookmark}
>
  <Bookmark className={isBookmarked ? 'fill-current' : ''} />
</Button>
```

### 3. ê³µìœ  ê¸°ëŠ¥
**í•„ìš”í•œ ê¸°ëŠ¥:**
```typescript
const handleShare = async () => {
  const shareData = {
    title: promotion.title,
    text: `${promotion.title} - ${promotion.district} ë¬¸í™” í”„ë¡œê·¸ë¨`,
    url: `${window.location.origin}/promotion/${promotion.id}`,
  };

  if (navigator.share && navigator.canShare(shareData)) {
    await navigator.share(shareData);
  } else {
    // í´ë¦½ë³´ë“œ ë³µì‚¬ fallback
    await navigator.clipboard.writeText(shareData.url);
    toast.success('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
  }
};
```

### 4. ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬
**í•„ìš”í•œ ê¸°ëŠ¥:**
- ì—¬ëŸ¬ ì´ë¯¸ì§€ ì§€ì›
- Carousel í˜•íƒœë¡œ ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë”
```typescript
interface Promotion {
  // ...
  images?: string[];  // ì—¬ëŸ¬ ì´ë¯¸ì§€ ì§€ì›
  image: string;      // ëŒ€í‘œ ì´ë¯¸ì§€
}
```

### 5. í•„í„°ë§ ì—°ë™
**í˜„ì¬:** App.tsxì—ì„œ í•„í„°ë§  
**ê°œì„ :** ì§€ì—­ í•„í„°ì™€ ìë™ ì—°ë™
```typescript
// App.tsxì—ì„œ
const filteredPromotions = promotions.filter((promo) => {
  return selectedDistrict === "all" || promo.district === selectedDistrict;
});
```

## API ì—°ë™ ê³„íš

### Mock ëª¨ë“œ
```typescript
// lib/api/api.ts
export const promotionApi = {
  async getAll() {
    if (USE_MOCK_MODE) {
      return { promotions: mockPromotions };
    }
    return await apiCall('/promotions');
  },

  async getById(id: string) {
    if (USE_MOCK_MODE) {
      const promotion = mockPromotions.find(p => p.id === id);
      return { promotion };
    }
    return await apiCall(`/promotions/${id}`);
  },

  async toggleBookmark(promotionId: string) {
    // ë¶ë§ˆí¬ í† ê¸€ ë¡œì§
  },
};
```

### Supabase í…Œì´ë¸” ì„¤ê³„ (ì°¸ê³ )
```sql
CREATE TABLE promotions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  title TEXT NOT NULL,
  district TEXT NOT NULL,
  category TEXT,
  date TEXT,
  image TEXT,
  description TEXT,
  organizer TEXT,
  link TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE promotion_bookmarks (
  user_id UUID REFERENCES users(id),
  promotion_id UUID REFERENCES promotions(id),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  PRIMARY KEY (user_id, promotion_id)
);
```

## í…ŒìŠ¤íŠ¸ ê³„íš

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- Props ì „ë‹¬ í…ŒìŠ¤íŠ¸
- ì¡°ê±´ë¶€ ë Œë”ë§ í…ŒìŠ¤íŠ¸ (link ìœ ë¬´)
- ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ ì‹œ Fallback í…ŒìŠ¤íŠ¸

### í†µí•© í…ŒìŠ¤íŠ¸
- í•„í„°ë§ ì—°ë™ í…ŒìŠ¤íŠ¸
- ì¢‹ì•„ìš”/ë¶ë§ˆí¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

### E2E í…ŒìŠ¤íŠ¸
- ì¹´ë“œ í´ë¦­ â†’ ìƒì„¸ë³´ê¸° í”Œë¡œìš°
- ì™¸ë¶€ ë§í¬ ë²„íŠ¼ í´ë¦­ â†’ ìƒˆ ì°½ ì—´ê¸°

## ì ‘ê·¼ì„± (a11y)

### ARIA ë ˆì´ë¸”
```tsx
<Card
  role="article"
  aria-label={`${promotion.title} - ${promotion.district}`}
>
  {/* ... */}
</Card>

<Button
  aria-label={`${promotion.title} ì™¸ë¶€ ë§í¬ ì—´ê¸°`}
>
  {/* ... */}
</Button>
```

### í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
- Tab í‚¤ë¡œ ë²„íŠ¼ì— ì ‘ê·¼ ê°€ëŠ¥
- Enter/Spaceë¡œ ë²„íŠ¼ í™œì„±í™”

## ì„±ëŠ¥ ìµœì í™”

### ì´ë¯¸ì§€ ìµœì í™”
- WebP í¬ë§· ì§€ì›
- Lazy loading (Intersection Observer)
- Responsive images (srcset)

### ë©”ëª¨ì´ì œì´ì…˜
```typescript
export const PromotionCard = React.memo(
  PromotionCardComponent,
  (prevProps, nextProps) => {
    return prevProps.promotion.id === nextProps.promotion.id;
  }
);
```
